<h1>Edit task</h1>
<%= form_with model: @task, url: user_task_path([@task.user, @task]), local: true do |form| %>
<% if @task.errors.any? %>
    <div id="error_explanation">
        <ul>
            <% @task.errors.full_messages.each do |msg| %>
                <li class="alert alert-warning"><%= msg %></li>
            <% end %>
        </ul>
    </div>
<% end %>

<p>
    <%= form.label :title %><br>
    <%= form.text_field :title %>
</p>

<p>
    <%= form.label :description %><br>
    <%= form.text_area :description %>
</p>

<p>
    <%= form.label :deadline %><br>
    <%= form.datetime_select :deadline %>
</p>

<p>
    <strong>Tag(s):</strong><br>
    <div id = "task_tags_tag_name">
      <%= form.fields_for :tags do |tags_form| %>
        <%= tags_form.check_box :_destroy %>
        <%= tags_form.text_field :tag_name %><br>
    <% end %>
  </div>
  <input type ="button" id="new" value="Add New Tag" onclick="addTag()" />
</p>

<script>
function addTag(){
var br = document.createElement("br");
var sp = document.createTextNode (" ");
var ipt1 = document.createElement("input");
ipt1.setAttribute("id","task_tags_tag_name");
ipt1.setAttribute("type","checkbox");
ipt1.setAttribute("name","task[tags_attributes][" + new Date().valueOf() + "][_destroy]");
var ipt2 = document.createElement("input");
ipt2.setAttribute("id","task_tags_tag_name");
ipt2.setAttribute("type","text");
ipt2.setAttribute("name","task[tags_attributes][" + new Date().valueOf() + "][tag_name]");
var div = document.getElementById("task_tags_tag_name");
div.appendChild(ipt1);
// div.appenChild(sp);
div.appendChild(ipt2);

div.appendChild(br);
}
</script>
<p>
    <%= form.submit%>
</p>
<% end %>


<%= link_to 'Back', user_tasks_path(@user) %>
